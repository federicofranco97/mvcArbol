<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="layout :: header">
        <title>Arbol Genealogico</title>
        <meta charset="UTF-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
        <script src="../static/js/app.js" type="text/javascript"></script>
    </head>
    <body class="view">
        <div th:replace="layout :: menu"></div>
        <h1 id="myTitle">Arbol Genealogico</h1>
        <a href="/moveTemplate" style="margin-left: 5%">.</a>
        <div id="contenedor1">
            <input type="text" placeholder="Busqueda por Nombre" onkeypress="barFilter2()" style="border:2px solid black;opacity: 0.8" onkeydown="barShow()" id="filtroTabla" />
            <table class="table table-striped table-bordered" id="tablaPrincipal" style="background-color: white;border:2px solid black;opacity: 0.8">
                <thead>                  
                    <th scope="col">Nombre Persona</th>
                    <th scope="col">Apellido Persona</th>
                    <th scope="col">Genero Persona</th>
                    <th scope="col"  style="text-align: center">Editar Persona</th>
                    <th scope="col"  style="text-align: center">Borrar Persona</th>                  
                </thead>
                <tbody  id="tablaPrincipal">
                    <tr th:each="persona : ${listaPersonas}" style="cursor: pointer">
                        <td th:text="${persona.getNombre()}" th:class="${persona.getId()}" onclick="sendFocusData(this)"></td>
                        <td th:text="${persona.getApellido()}" th:class="${persona.getId()}"  onclick="sendFocusData(this)"></td>
                        <td th:text="${persona.getGenero()}" th:class="${persona.getId()}" onclick="sendFocusData(this)"></td>
                        <td th:class="${persona.getId()}" style="text-align: center"  onclick="modificarPersona(this)">
                            <a style="color:inherit"><i class="fas fa-edit"></i></a></td>
                        <td th:class="${persona.getId()}" style="text-align: center">
                            <a style="color:inherit" onclick="eliminarPersona(this)"><i class="fas fa-trash-alt"></i></a></td>
                    </tr>

                </tbody>
            </table>
        </div>
        <div th:replace="layout :: footer"></div>
    </body>
</html>

<script>
    function sendFocusData(sth){
        var id=sth.className;
        window.open("/focusPersona?id="+id,"_self");
    }
    
    function modificarPersona(sth){
        var id = sth.className;
        console.log(id);
        window.open("/modificar?id="+id,"_self");
    }
    
    function eliminarPersona(sth){
        var id = sth.parentNode.className;
        window.open("/eliminar?id="+id,"_self");
    }

</script>